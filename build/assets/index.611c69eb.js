var pt=Object.defineProperty;var dt=(n,t,e)=>t in n?pt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var J=(n,t,e)=>(dt(n,typeof t!="symbol"?t+"":t,e),e);function ne(){import("data:text/javascript,")}const ft=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function e(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerpolicy&&(c.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?c.credentials="include":s.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(s){if(s.ep)return;s.ep=!0;const c=e(s);fetch(s.href,c)}};ft();const w={routes:{index:"/",search:"/search?q=:search",cart:"/cart",wishlist:"/wishlist",profile:"/profile",register:"/register",login:"/login",book:"/book/:book",user:"/user/:user"},search:{types:{book:"book",user:"user",cart:"cart"}},lists:{types:{book:"book",user:"user",cart:"cart"}}};function mt(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var tt={};(function(n){var t=function(){var e=function(m,o,r,a){for(r=r||{},a=m.length;a--;r[m[a]]=o);return r},i=[1,9],s=[1,10],c=[1,11],p=[1,12],h=[5,11,12,13,14,15],f={trace:function(){},yy:{},symbols_:{error:2,root:3,expressions:4,EOF:5,expression:6,optional:7,literal:8,splat:9,param:10,"(":11,")":12,LITERAL:13,SPLAT:14,PARAM:15,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",11:"(",12:")",13:"LITERAL",14:"SPLAT",15:"PARAM"},productions_:[0,[3,2],[3,1],[4,2],[4,1],[6,1],[6,1],[6,1],[6,1],[7,3],[8,1],[9,1],[10,1]],performAction:function(o,r,a,u,l,d,E){var _=d.length-1;switch(l){case 1:return new u.Root({},[d[_-1]]);case 2:return new u.Root({},[new u.Literal({value:""})]);case 3:this.$=new u.Concat({},[d[_-1],d[_]]);break;case 4:case 5:this.$=d[_];break;case 6:this.$=new u.Literal({value:d[_]});break;case 7:this.$=new u.Splat({name:d[_]});break;case 8:this.$=new u.Param({name:d[_]});break;case 9:this.$=new u.Optional({},[d[_-1]]);break;case 10:this.$=o;break;case 11:case 12:this.$=o.slice(1);break}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,10:8,11:i,13:s,14:c,15:p},{1:[3]},{5:[1,13],6:14,7:5,8:6,9:7,10:8,11:i,13:s,14:c,15:p},{1:[2,2]},e(h,[2,4]),e(h,[2,5]),e(h,[2,6]),e(h,[2,7]),e(h,[2,8]),{4:15,6:4,7:5,8:6,9:7,10:8,11:i,13:s,14:c,15:p},e(h,[2,10]),e(h,[2,11]),e(h,[2,12]),{1:[2,1]},e(h,[2,3]),{6:14,7:5,8:6,9:7,10:8,11:i,12:[1,16],13:s,14:c,15:p},e(h,[2,9])],defaultActions:{3:[2,2],13:[2,1]},parseError:function(o,r){if(r.recoverable)this.trace(o);else{let a=function(u,l){this.message=u,this.hash=l};throw a.prototype=Error,new a(o,r)}},parse:function(o){var r=this,a=[0],u=[null],l=[],d=this.table,E="",_=0,K=0,ct=2,Q=1,lt=l.slice.call(arguments,1),b=Object.create(this.lexer),S={yy:{}};for(var U in this.yy)Object.prototype.hasOwnProperty.call(this.yy,U)&&(S.yy[U]=this.yy[U]);b.setInput(o,S.yy),S.yy.lexer=b,S.yy.parser=this,typeof b.yylloc=="undefined"&&(b.yylloc={});var H=b.yylloc;l.push(H);var ut=b.options&&b.options.ranges;typeof S.yy.parseError=="function"?this.parseError=S.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var ht=function(){var R;return R=b.lex()||Q,typeof R!="number"&&(R=r.symbols_[R]||R),R},g,L,v,F,P={},M,x,X,B;;){if(L=a[a.length-1],this.defaultActions[L]?v=this.defaultActions[L]:((g===null||typeof g=="undefined")&&(g=ht()),v=d[L]&&d[L][g]),typeof v=="undefined"||!v.length||!v[0]){var z="";B=[];for(M in d[L])this.terminals_[M]&&M>ct&&B.push("'"+this.terminals_[M]+"'");b.showPosition?z="Parse error on line "+(_+1)+`:
`+b.showPosition()+`
Expecting `+B.join(", ")+", got '"+(this.terminals_[g]||g)+"'":z="Parse error on line "+(_+1)+": Unexpected "+(g==Q?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(z,{text:b.match,token:this.terminals_[g]||g,line:b.yylineno,loc:H,expected:B})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+L+", token: "+g);switch(v[0]){case 1:a.push(g),u.push(b.yytext),l.push(b.yylloc),a.push(v[1]),g=null,K=b.yyleng,E=b.yytext,_=b.yylineno,H=b.yylloc;break;case 2:if(x=this.productions_[v[1]][1],P.$=u[u.length-x],P._$={first_line:l[l.length-(x||1)].first_line,last_line:l[l.length-1].last_line,first_column:l[l.length-(x||1)].first_column,last_column:l[l.length-1].last_column},ut&&(P._$.range=[l[l.length-(x||1)].range[0],l[l.length-1].range[1]]),F=this.performAction.apply(P,[E,K,_,S.yy,v[1],u,l].concat(lt)),typeof F!="undefined")return F;x&&(a=a.slice(0,-1*x*2),u=u.slice(0,-1*x),l=l.slice(0,-1*x)),a.push(this.productions_[v[1]][0]),u.push(P.$),l.push(P._$),X=d[a[a.length-2]][a[a.length-1]],a.push(X);break;case 3:return!0}}return!0}},y=function(){var m={EOF:1,parseError:function(r,a){if(this.yy.parser)this.yy.parser.parseError(r,a);else throw new Error(r)},setInput:function(o,r){return this.yy=r||this.yy||{},this._input=o,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var o=this._input[0];this.yytext+=o,this.yyleng++,this.offset++,this.match+=o,this.matched+=o;var r=o.match(/(?:\r\n?|\n).*/g);return r?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),o},unput:function(o){var r=o.length,a=o.split(/(?:\r\n?|\n)/g);this._input=o+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-r),this.offset-=r;var u=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),a.length-1&&(this.yylineno-=a.length-1);var l=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:a?(a.length===u.length?this.yylloc.first_column:0)+u[u.length-a.length].length-a[0].length:this.yylloc.first_column-r},this.options.ranges&&(this.yylloc.range=[l[0],l[0]+this.yyleng-r]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(o){this.unput(this.match.slice(o))},pastInput:function(){var o=this.matched.substr(0,this.matched.length-this.match.length);return(o.length>20?"...":"")+o.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var o=this.match;return o.length<20&&(o+=this._input.substr(0,20-o.length)),(o.substr(0,20)+(o.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var o=this.pastInput(),r=new Array(o.length+1).join("-");return o+this.upcomingInput()+`
`+r+"^"},test_match:function(o,r){var a,u,l;if(this.options.backtrack_lexer&&(l={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(l.yylloc.range=this.yylloc.range.slice(0))),u=o[0].match(/(?:\r\n?|\n).*/g),u&&(this.yylineno+=u.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:u?u[u.length-1].length-u[u.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+o[0].length},this.yytext+=o[0],this.match+=o[0],this.matches=o,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(o[0].length),this.matched+=o[0],a=this.performAction.call(this,this.yy,this,r,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a)return a;if(this._backtrack){for(var d in l)this[d]=l[d];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var o,r,a,u;this._more||(this.yytext="",this.match="");for(var l=this._currentRules(),d=0;d<l.length;d++)if(a=this._input.match(this.rules[l[d]]),a&&(!r||a[0].length>r[0].length)){if(r=a,u=d,this.options.backtrack_lexer){if(o=this.test_match(a,l[d]),o!==!1)return o;if(this._backtrack){r=!1;continue}else return!1}else if(!this.options.flex)break}return r?(o=this.test_match(r,l[u]),o!==!1?o:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var r=this.next();return r||this.lex()},begin:function(r){this.conditionStack.push(r)},popState:function(){var r=this.conditionStack.length-1;return r>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(r){return r=this.conditionStack.length-1-Math.abs(r||0),r>=0?this.conditionStack[r]:"INITIAL"},pushState:function(r){this.begin(r)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(r,a,u,l){switch(u){case 0:return"(";case 1:return")";case 2:return"SPLAT";case 3:return"PARAM";case 4:return"LITERAL";case 5:return"LITERAL";case 6:return"EOF"}},rules:[/^(?:\()/,/^(?:\))/,/^(?:\*+\w+)/,/^(?::+\w+)/,/^(?:[\w%\-~\n]+)/,/^(?:.)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6],inclusive:!0}}};return m}();f.lexer=y;function k(){this.yy={}}return k.prototype=f,f.Parser=k,new k}();typeof mt!="undefined"&&(n.parser=t,n.Parser=t.Parser,n.parse=function(){return t.parse.apply(t,arguments)})})(tt);function T(n){return function(t,e){return{displayName:n,props:t,children:e||[]}}}var et={Root:T("Root"),Concat:T("Concat"),Literal:T("Literal"),Splat:T("Splat"),Param:T("Param"),Optional:T("Optional")},nt=tt.parser;nt.yy=et;var bt=nt,yt=Object.keys(et);function gt(n){return yt.forEach(function(t){if(typeof n[t]=="undefined")throw new Error("No handler defined for "+t.displayName)}),{visit:function(t,e){return this.handlers[t.displayName].call(this,t,e)},handlers:n}}var ot=gt,_t=ot,kt=/[\-{}\[\]+?.,\\\^$|#\s]/g;function st(n){this.captures=n.captures,this.re=n.re}st.prototype.match=function(n){var t=this.re.exec(n),e={};if(!!t)return this.captures.forEach(function(i,s){typeof t[s+1]=="undefined"?e[i]=void 0:e[i]=decodeURIComponent(t[s+1])}),e};var vt=_t({Concat:function(n){return n.children.reduce(function(t,e){var i=this.visit(e);return{re:t.re+i.re,captures:t.captures.concat(i.captures)}}.bind(this),{re:"",captures:[]})},Literal:function(n){return{re:n.props.value.replace(kt,"\\$&"),captures:[]}},Splat:function(n){return{re:"([^?]*?)",captures:[n.props.name]}},Param:function(n){return{re:"([^\\/\\?]+)",captures:[n.props.name]}},Optional:function(n){var t=this.visit(n.children[0]);return{re:"(?:"+t.re+")?",captures:t.captures}},Root:function(n){var t=this.visit(n.children[0]);return new st({re:new RegExp("^"+t.re+"(?=\\?|$)"),captures:t.captures})}}),wt=vt,xt=ot,Ct=xt({Concat:function(n,t){var e=n.children.map(function(i){return this.visit(i,t)}.bind(this));return e.some(function(i){return i===!1})?!1:e.join("")},Literal:function(n){return decodeURI(n.props.value)},Splat:function(n,t){return t[n.props.name]?t[n.props.name]:!1},Param:function(n,t){return t[n.props.name]?t[n.props.name]:!1},Optional:function(n,t){var e=this.visit(n.children[0],t);return e||""},Root:function(n,t){t=t||{};var e=this.visit(n.children[0],t);return e?encodeURI(e):!1}}),At=Ct,Et=bt,St=wt,Lt=At;O.prototype=Object.create(null);O.prototype.match=function(n){var t=St.visit(this.ast),e=t.match(n);return e||!1};O.prototype.reverse=function(n){return Lt.visit(this.ast,n)};function O(n){var t;if(this?t=this:t=Object.create(O.prototype),typeof n=="undefined")throw new Error("A route spec is required");return t.spec=n,t.ast=Et.parse(n),t}var Pt=O,Rt=Pt,q=Rt;function Tt(n={}){return`<div>Main template (new)</div>
<list-component title="Lastest" list-type="book"></list-component>`}function qt(n={}){return'<list-component title="Cart" list-type="cart"></list-component>'}function It(n={}){return`<book-detail book="${n.book}"></book-detail>`}function Ot(n={}){return"<div>wishlist</div>"}function $t(n={}){return`<list-component title="search" search="${n.search}" book="" list-type="book"></list-component>`}function Mt(n={}){return"<div>profile</div>"}const C={Main:new q(w.routes.index),Book:new q(w.routes.book),Search:new q(w.routes.search),Cart:new q(w.routes.cart),Wishlist:new q(w.routes.wishlist),Profile:new q(w.routes.profile)},Bt=[{route:C.Main,page:Tt},{route:C.Book,page:It},{route:C.Search,page:$t},{route:C.Wishlist,page:Ot},{route:C.Profile,page:Mt},{route:C.Cart,page:qt}],jt=n=>{const t=Bt.find(e=>e.route.match(n));if(t){const e=t.route.match(n);return{page:t.page,route:t.route,params:e}}return null},W=n=>{let t="<h1>404</h1>";const e=jt(n);e&&(t=e.page(e.params)),document.querySelector("#content").innerHTML=t},$=n=>{window.history.pushState({path:n},n,n),W(n)},Nt=()=>{window.addEventListener("popstate",n=>{W(new URL(window.location.href).pathname)}),document.querySelectorAll('[href^="/"]').forEach(n=>{n.addEventListener("click",t=>{t.preventDefault();const{pathname:e}=new URL(t.target.href);$(e)})}),W(new URL(window.location.href).pathname)};class Vt extends HTMLElement{constructor(){super();J(this,"onClick",e=>{if(e.preventDefault(),!this.selected){const{pathname:i}=new URL(e.target.href);$(i)}});const e=this.attachShadow({mode:"open"}),i=document.createElement("a"),s=document.createElement("style");this.selected=!1,s.textContent=`
            a {
                padding: 5px;
                margin: 5px 5px 5px 0;
                background-color: #ddd;
                color: #333;
            }
            a:hover {
                background-color: #666;
                color: #eee;
                text-decoration: none;
            }
        `,e.appendChild(s),e.appendChild(i)}connectedCallback(){const e=this.shadowRoot,i=this.getAttribute("href"),s=e.querySelector("a");s.href=i,s.textContent=this.getAttribute("text"),s.addEventListener("click",this.onClick)}static get observedAttributes(){return["selected"]}attributeChangedCallback(e,i,s){e==="selected"&&this.updateStyle(JSON.parse(s))}updateStyle(e){if(e){const s=this.shadowRoot.querySelector("style");this.selected=!0,s.textContent=`
                a {
                    padding: 5px;
                    margin: 5px 5px 5px 0;
                    background-color: #333;
                    text-decoration: none;
                    color: #ccc;
                    cursor: default;
                }
            `}}}customElements.define("nav-link",Vt);const Dt=n=>fetch("http://localhost:1111"+n).then(t=>{if(t.ok)return t.json();throw new Error}).catch(t=>{console.log(t)}),Ut=(n,t={})=>fetch("http://localhost:1111"+n,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(e=>{if(e.ok)return e.json();throw new Error}).catch(e=>{console.log(e)}),Ht=(n,t={})=>fetch("http://localhost:1111"+n,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(e=>{if(e.ok)return e.json();throw new Error}).catch(e=>{console.log(e)}),Ft=(n,t={})=>fetch("http://localhost:1111"+n,{method:"DELETE",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(e=>{if(e.ok)return e.json();throw new Error}).catch(e=>{console.log(e)});var D={get:Dt,post:Ut,put:Ht,delete:Ft};const zt=()=>D.get("/cart"),it=(n={})=>D.post("/cart",n),Z=(n,t={})=>D.put(`/cart/${n}`,t),Jt=(n,t)=>D.delete(`/cart/${n}`,t);class Wt extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"}),e=document.createElement("div");e.setAttribute("class","main-menu"),this.links=[{href:w.routes.index,name:"home",class:"home-link"},{href:w.routes.wishlist,name:"wishlist",class:"wishlist-link"},{href:w.routes.profile,name:"profile",class:"profile-link"},{href:w.routes.cart,name:"cart",class:"cart-link"}];const i=document.createElement("style");i.textContent=`
            .main-menu {
                display: flex;
                align-items: center;
                padding: 5px;
            } 

            .global-search {
                font-size: 1am;
                border: 1px solid #ccc;
                border-radius: 8px;
                padding: 4px 20px;
                width: 100%;
                margin: 0 50px;
            }

            .global-search:placeholder {
                color: #aaa;
            }
        `,t.appendChild(i),t.appendChild(e);const s=document.createDocumentFragment();this.links.forEach(h=>{const f=document.createElement("nav-link");f.setAttribute("class",`main-link ${h.class}`),f.setAttribute("href",h.href),f.setAttribute("text",h.name),s.appendChild(f)}),e.appendChild(s);const c=document.createElement("select");c.setAttribute("class","select"),c.innerHTML=`
            <option selected value="books">Books</option>
            <option value="users">Users</option>
        `;const p=document.createElement("input");p.setAttribute("class","global-search"),p.addEventListener("keyup",h=>{if(h.stopPropagation,h.key==="Enter"){h.preventDefault();const f=h.target.value,y=C.Search.reverse({search:f});$(y)}}),e.appendChild(p)}updateSearch(){const e=this.shadowRoot.querySelector("input"),i=this.getAttribute("search");e.value=i}async connectedCallback(){const t=this.shadowRoot,e=this.getAttribute("search");if(e){const c=t.querySelector("input");c.value=e}const{pathname:i}=new URL(window.location.href),s=this.links.find(c=>c.href==i);s&&t.querySelector(`.${s.class}`)}static get observedAttributes(){return["search","type"]}attributeChangedCallback(t,e,i){t==="search"&&this.updateSearch(),t==="type"&&this.updateSearch()}}customElements.define("main-nav",Wt);class Yt extends HTMLElement{constructor(){super();J(this,"onClick",e=>{if(e.preventDefault(),!this.selected){const{pathname:i}=new URL(e.target.href);$(i)}});const e=this.attachShadow({mode:"open"}),i=document.createElement("img");i.setAttribute("class","user-avatar");const s=document.createElement("p");s.setAttribute("class","avatar-name");const c=document.createElement("style");c.textContent=`
            .user-avatar {
                display: flex;
                align-items: center;
                justify-content: center;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                background-color: red;
            }
            .user-avatar.small {
                width: 10px;
                height: 10px;
            }
        `,e.appendChild(c),e.appendChild(i),e.appendChild(s)}connectedCallback(){this.updateElement()}static get observedAttributes(){return["user-name","small"]}attributeChangedCallback(e,i,s){this.updateElement()}updateElement(){this.shadowRoot;const e=this.getAttribute("user-name"),i=this.getAttribute("small"),s=this.querySelector(".user-avatar"),c=this.querySelector(".avatar-name");i?s.setAttribute("class"," user-avatar small"):s.setAttribute("class"," user-avatar"),e&&(c.textContent=e)}}customElements.define("user-avatar",Yt);let A,j,I=[],N;const V=async()=>{A=[],N=!1,await zt().then(n=>{j=0,n.forEach(t=>{A.push({bookId:t.bookId,id:t.id,count:t.count}),j++}),I=[...n]}).catch(n=>console.log(n.message)),N=!0,console.log("\u043A\u043E\u0440\u0437\u0438\u043D\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430")},rt=new Map,G=n=>rt.get(n),Y=n=>{rt.set(n.isbn13,n)},Gt=()=>fetch("https://api.itbook.store/1.0/new").then(n=>{if(n.ok)return n.json();throw new Error}),at=n=>fetch("https://api.itbook.store/1.0/books/"+n).then(t=>{if(t.ok)return t.json();throw new Error}).catch(t=>{console.log(t)}),Kt=(n,t)=>fetch(`https://api.itbook.store/1.0/search/${n}/${t}`).then(e=>{if(e.ok)return e.json();throw new Error});class Qt extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"}),e=document.createElement("div");e.setAttribute("class","book-detail"),this.isClicked=!1,e.innerHTML=`
            <div class="book-detail__container">
                <img class="book-detail__container__cover" alt="book image">
                <h2 class="book-detail__container__title"></h2>
                <p class="book-detail__container__author"></p>
                <p class="book-detail__container__price"></p>
                <p class="book-detail__container__description"></p>
                <button class="book-detail__container__cart-btn">Add to Cart</button>
                <button class="book-detail__container__updCart-btn">Update Cart</button>
                <button class="book-detail__container__wishlist-btn">Wishlist</button>
                <p class="book-detail__container__publisher"></p>
                <p class="book-detail__container__isbn13"></p>
            </div>
            <list-component class="similars" title="Similar" list-type="book"></list-component>
        `,t.appendChild(e)}connectedCallback(){this.shadowRoot;const t=this.getAttribute("book");G(t),at(t).then(e=>{Y(e),this.updateBook(e)}).catch(e=>console.log(e))}updateBook(t){const e=this.shadowRoot,i=e.querySelector(".similars"),s=this.getAttribute("book");i.setAttribute("id",s),console.log(i),i.setAttribute("search",t.title);const c=e.querySelector(".book-detail__container__title");c.textContent=t.title;const p=e.querySelector(".book-detail__container__author");p.textContent=t.authors;const h=e.querySelector(".book-detail__container__price");h.textContent=t.price;const f=e.querySelector(".book-detail__container__description");f.textContent=t.desc;const y=e.querySelector(".book-detail__container__publisher");y.textContent="Publisher:"+t.publisher;const k=e.querySelector(".book-detail__container__isbn13");k.textContent="ISBN13:"+t.isbn13,e.querySelector(".book-detail__container__cover").setAttribute("src",t.image);const o=e.querySelector(".book-detail__container__cart-btn");o.setAttribute("data-art",t.isbn13),e.querySelector(".book-detail__container__wishlist-btn").setAttribute("data-art",t.isbn13),e.querySelector(".book-detail__container__updCart-btn").setAttribute("data-art",t.isbn13);let u=1;console.log("cartData",I),I.forEach(d=>{d.bookId===s&&(o.innerText="Added",o.setAttribute("disabled",!0),u=d.count,d.id||I.length+1)});const l={bookId:s,count:u,userId:1};console.log("detail",l),o.addEventListener("click",d=>{d.stopPropagation(),it(l),o.innerText="Added",o.setAttribute("disabled",!0),this.isClicked=!0,I.push(l)})}}customElements.define("book-detail",Qt);class Xt extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"}),e=document.createElement("div");e.setAttribute("class","book-container"),e.innerHTML=`
            <img class="book-container__cover" alt="book image">
            <h4 class="book-container__title"></h4>
            <p class="book-container__subtitle"></p>
            <p class="book-container__price"></p>
            <div class="book-container__button-container"></div>
        `,t.appendChild(e)}connectedCallback(){const t=this.shadowRoot,e=this.getAttribute("id");let i=this.getAttribute("isAdded")||!1;const s=G(e),c=this.getAttribute("ifCart")||!1;console.log("book",s);let p=this.getAttribute("count")||"0";const h=t.querySelector(".book-container");t.querySelector(".book-container__cover").setAttribute("src",s.image);const y=t.querySelector(".book-container__title");y.textContent=s.title;const k=t.querySelector(".book-container__subtitle");k.textContent=s.subtitle;const m=t.querySelector(".book-container__price");if(c){const r=s.price.slice(1);m.textContent="$"+(+r*+p).toFixed(2)}else m.textContent=s.price;const o=t.querySelector(".book-container__button-container");if(i==="true"){const r=A.map(d=>d.bookId).indexOf(s.isbn13),a=A[r].id;o.innerHTML=`<button class="book-container__button-container__button-minus">-</button>
                    <span>${p}</span>
                    <button class="book-container__button-container__button-plus">+</button>`,o.querySelector(".book-container__button-container__button-minus").addEventListener("click",d=>{if(d.stopPropagation(),p--,p>0)Z(a,{bookId:e,count:p}),this.setAttribute("count",p);else{const E={bookId:e,count:p+1};this.deleteFrom(a,E,p)}}),o.querySelector(".book-container__button-container__button-plus").addEventListener("click",d=>{d.stopPropagation(),p++,Z(a,{bookId:e,count:p}),this.setAttribute("count",p)})}else{o.innerHTML='<button class="book-container__button-container__button"></button>';const r=o.querySelector(".book-container__button-container__button");r.innerText="Add To Cart",r.addEventListener("click",a=>{a.stopPropagation(),p=1,this.addTo(e,p)})}h.addEventListener("click",r=>{r.stopPropagation();const a=C.Book.reverse({book:e});$(a)})}async addTo(t,e){await it({bookId:t,count:e}),await V(),this.setAttribute("isAdded",!0),this.setAttribute("count",e)}async deleteFrom(t,e,i){await Jt(t,e),await V(),this.setAttribute("isAdded",!1),this.setAttribute("count",0)}static get observedAttributes(){return["isAdded","count"]}attributeChangedCallback(t,e,i){this.connectedCallback()}}customElements.define("book-component",Xt);class Zt extends HTMLElement{constructor(){super(),this.search="",this.page=1,this.lastPage=!1;const t=this.attachShadow({mode:"open"}),e=document.createElement("div");e.setAttribute("class","list-container");const i=document.createElement("h2");i.setAttribute("class","list-title"),t.appendChild(i);const s=document.createElement("div");s.setAttribute("class","pagination");const c=document.createElement("button");c.setAttribute("class","pagination__prev-btn"),c.textContent="Prev",c.addEventListener("click",f=>{f.stopPropagation(),this.page>1&&(this.page--,this.typeList==="book"&&this.getBooksPage())});const p=document.createElement("button");p.setAttribute("class","pagination__next-btn"),p.textContent="Next",p.addEventListener("click",f=>{f.stopPropagation(),this.page!==this.lastPage&&(this.page++,this.connectedCallback())});const h=document.createElement("span");h.setAttribute("class","pagination__number"),h.textContent=this.page,s.appendChild(c),s.appendChild(h),s.appendChild(p),t.appendChild(e),t.appendChild(s)}connectedCallback(){this.updatePage(),this.updateList()}static get observedAttributes(){return["search"]}attributeChangedCallback(t,e,i){this.updateList()}updatePage(){const t=this.shadowRoot,e=t.querySelector(".pagination__prev-btn"),i=t.querySelector(".pagination__next-btn"),s=t.querySelector(".pagination__number");console.log(e),this.page===1?e.setAttribute("disabled",!0):e.removeAttribute("disabled"),this.page===this.lastPage?i.setAttribute("disabled",!0):i.removeAttribute("disabled"),s.textContent=this.page}updateList(){const e=this.shadowRoot.querySelector(".list-title"),i=this.getAttribute("title"),s=this.getAttribute("list-type");e.textContent=i,s==="book"&&this.getBooksPage(),s==="cart"&&this.getCartPage()}getBooksPage(){const t=this.shadowRoot,e=t.querySelector(".list-container"),i=this.getAttribute("search"),s=this.getAttribute("id"),c=t.querySelector(".pagination");i?this.search=i:t.removeChild(c),(this.search?Kt(this.search,this.page):Gt()).then(async h=>{const f=document.createDocumentFragment();this.lastPage=Math.floor(h.total%10===0?h.total/10:h.total/10+1);const y=h.total;e.innerHTML="",await V(),h.books.forEach(k=>{if(k.isbn13!==s){Y(k);const m=document.createElement("book-component");if(N){m.setAttribute("id",k.isbn13);const o=A.map(r=>r.bookId).indexOf(k.isbn13);if(o>=0){const r=A[o].count;m.setAttribute("isAdded",!0),m.setAttribute("count",r)}}this.search&&m.setAttribute("search",this.search),f.appendChild(m)}}),e.appendChild(f),y===0&this.page===1&&(e.textContent="Books are not found")}).catch(h=>{console.log(h)})}async getCartPage(){const t=this.shadowRoot,e=document.createDocumentFragment(),i=t.querySelector(".list-container"),s=this.getAttribute("id");i.innerHTML="";const c=document.createElement("p"),p=t.querySelector(".pagination");t.removeChild(p),await V(),console.log("newarr",A),await Promise.all(A.map(async h=>{await at(h.bookId).then(f=>{if(f.isbn13!==s){Y(f);const y=document.createElement("book-component");N&&(y.setAttribute("id",h.bookId),y.setAttribute("isAdded",!0),y.setAttribute("count",h.count),y.setAttribute("ifCart",!0),c.textContent=`Total: ${j}`),e.appendChild(y)}}).catch(f=>{console.log(f)})})),i.appendChild(e),i.appendChild(c),j||(i.textContent="Cart is empty")}}customElements.define("list-component",Zt);class te extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"}),e=document.createElement("div");e.setAttribute("class","cart-container");const i=document.createElement("h2");i.innerText="Cart",t.appendChild(i),t.appendChild(e)}connectedCallback(){this.shadowRoot;const t=this.getAttribute("id");G(t),document.createElement("book-componponent")}}customElements.define("cart-component",te);Nt();export{ne as __vite_legacy_guard};
